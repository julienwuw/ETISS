


if (NOT Verilator_TEMPLATE_REINCLUDED)

	set(ETISS_PROJECT_NAME Verilator)
	set(ETISS_PROJECT_PATH ${CMAKE_CURRENT_LIST_DIR})
	
	set(${ETISS_PROJECT_NAME}_MAKEFILE Makefile)
	
	file(GLOB_RECURSE ${ETISS_PROJECT_NAME}_MAKEFILE_PROJECTFILES *.cpp *.h)

	set(${ETISS_PROJECT_NAME}_TEMPLATE_REINCLUDE ${CMAKE_CURRENT_LIST_FILE})

	include(../../CMakeLists.txt.project.template)

else (NOT Verilator_TEMPLATE_REINCLUDED)

			install(CODE "
						if(NOT EXISTS ${PROJECT_BINARY_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX})
							if(EXISTS ${PROJECT_SOURCE_DIR}/build/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX})
								message(WARNING \"${PROJECT_SOURCE_DIR}/build/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX} should be moved to ${PROJECT_BINARY_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX}\")
								execute_process(COMMAND \"${CMAKE_COMMAND}\" -E copy \"${PROJECT_SOURCE_DIR}/build/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX}\" \"${PROJECT_BINARY_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX}\")
							elseif(EXISTS ${PROJECT_SOURCE_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX})
								message(WARNING \"${PROJECT_SOURCE_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX} should be moved to ${PROJECT_BINARY_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX}\")
								execute_process(COMMAND \"${CMAKE_COMMAND}\" -E copy \"${PROJECT_SOURCE_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX}\" \"${PROJECT_BINARY_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX}\")
							else()
								message(WARNING \"Installation of makefile project VerilatorO failed. ${PROJECT_BINARY_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX} was not available to install\")
							endif()
						endif()
					")
	install( FILES ${PROJECT_BINARY_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}VerilatorO${CMAKE_SHARED_LIBRARY_SUFFIX}
					DESTINATION lib/plugins
					OPTIONAL
				)

endif(NOT Verilator_TEMPLATE_REINCLUDED)

